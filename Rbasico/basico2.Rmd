---
title: <span style="color:#88398A">Intro R</span>
author: <span style="color:#88398A"> <font size="6">Natalia da Silva, \@STAT_NT</span></font>

date: <span style="color:#88398A"> 11 de Marzo, 2018
output: ioslides_presentation
logo: logoclass.png
widescreen: no
---

 <style>
 .title-slide {
     background-image: url(logo.png);
     background-repeat: no-repeat;
     padding:40px;
     background-position: 90% 80%;
     background-size: 200px 200px;
   }
   </style>
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## <span style="color:#88398A">Tipo de estructuras de datos</span>

- Vectores
- Listas
- Array
- Matrices
- Data frame


## <span style="color:#88398A">Atributos</span>

Para guardar metadata de un objeto, información adicional

Accedemos usando `attr` de forma individual o todos juntos `atributes`

Ejemplo:

```{r, echo=TRUE, eval=FALSE}
y <- c(1, 5, 7)

attr(y, "atributos") <- "vector numérico"
  
attr(y, "atributos")
  
attributes(y)
```


## <span style="color:#88398A">Atributos</span>


La mayoría de los atributos se pierden cuando modifico un objeto

Atributos más comunes que no se pierden

- Nombre, un vector caracter que a cada elemento le da un nombre (`name`)

- Dimensiones, se usa para transformatr vectores en matrices y arrays (`dim`)

- Clases, usado para implementar objetos tipo `S3`  (+ simple sitema OO, `class` )

no necesitamos usar `attr(x, `dim`)` directamente `dim`


## <span style="color:#88398A">Nombres</span>

- `y <- c(j = 1, q = 5,  k = 7)`

- `names(y) <- c("j", "q", "k")

- usar la función `setNames`


## <span style="color:#88398A">Factores</span>


- Vector que contiene valores predefinidos y se usa para guardar datos categóricos. 

- Los factores se construyen sobre un vector de tipo entero pero son distintos por el atributo `class` tipo `factor` and  `levels` que define los posibles valores


## <span style="color:#88398A">Factores</span>

- Tipo particular de datos numericos o enteros

- Números + etiquetas

- Se usan para variables categóricas

- Por defecto de tipo caracter son factores  (`stringsAsFactors = TRUE`)

- Cuando importo, asegurarme que las variables categóricas con valores numéricos son convertidas a factores y crearle los niveles.

## <span style="color:#88398A">Factores</span>
```{r, echo=TRUE}
w <- factor(c("Bajo", "Medio", "Alto"))
class(w)
levels(w)
```


## <span style="color:#88398A">Factores</span>

- Cuando sé los posibles valores aunque no tenga obs

- Usar `factor` en vez de `character` cuando no tengo obs para algún grupo
```{r,echo=TRUE}
x_nivel <- c("Medio", "Alto", "Alto")

x <- factor(x_nivel, levels = c("Bajo", "Medio", "Alto"))

table(x)
```

## <span style="color:#88398A">Factores</span>

```{r, echo=TRUE}
x <- factor(x_nivel, levels = c("Bajo", "Medio", "Alto"),
            labels = c("B", "M", "A"))

table(x)
```


## <span style="color:#88398A">Factores</span>

- En general lo más común cuando se cargan datos es que convierta caracteres en factores

- No es optimo porque no hay forma que al leerlos sepamos todos los niveles o el orden de los mismos.

- Se puede usar el argumento `stringsAsFactors = FALSE` y luego cambiar a factor 

## <span style="color:#88398A">Factores</span>

- los factores a menudo hay que re-ordenarlos para simplificar la comparación.

- Se puede especificar el orden de los niveles especificándolos 

- También podemos ordenar los niveles de una variable dependiendo de alguún resumen estadistico de otra `reorder`


## <span style="color:#88398A">Matrices y Arrays</span>

- Agregar `dim` a un vector permite que se comporte compo un array multi-dimensional.

- Caso especial de un `array` es una `matrix` que tiene dimensión 2

- Arrays son más raros pero está bien saber que existen

`matrix()` `array()`


## <span style="color:#88398A">Matrices y Arrays</span>

```{r, echo=TRUE}

w <- matrix( c( rep(c(1, 2), 3)), ncol = 3, nrow = 2)

w

w[,1]

class(w[, 1])
```

## <span style="color:#88398A">Matrices y Arrays</span>
```{r, echo=TRUE}

# un argumento que describe todas las dims

z <- array(1:12, c(3, 2, 2))

z[1:3,1:2,1]
```

## <span style="color:#88398A">Data frames</span>

- Es la foma más común de almacenar los datos en R y hacer el análisis más sencillo

- Una estructura de dos dimensiones, que comparte propiedades de matrices y listas. Data frame es una lista de vectores de igual longitud.

- Por ejemplo podemos usar `names(), colnames(), rownames()`.


## <span style="color:#88398A">Crear data frames</span>

```{r, echo=TRUE}
dat <- data.frame(x = c(8, 4, 5), y = c("x", "y", "z"))

str(dat)
head(dat)

```


## <span style="color:#88398A">Crear  data frame</span>

```{r, echo=TRUE}
dat_ch <- data.frame(x = c(8, 4, 5), y = c("x", "y", "z"),
                     stringsAsFactors = FALSE)

str(dat_ch)


```


## <span style="color:#88398A">Crear  data frame</span>

`as.data.frame()`